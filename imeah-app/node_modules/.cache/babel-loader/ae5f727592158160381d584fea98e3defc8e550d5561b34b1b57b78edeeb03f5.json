{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate}from'react-router-dom';import{Container,TextField,Button,Typography,Box,Select,MenuItem,InputLabel,FormControl}from'@mui/material';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditItemPage=()=>{const{id}=useParams();const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[categories,setCategories]=useState([]);const[selectedCategory,setSelectedCategory]=useState('');const navigate=useNavigate();useEffect(()=>{const userId=localStorage.getItem('userId');if(!userId){navigate('/login');}const fetchItemAndCategories=async()=>{try{const itemResponse=await axios.get(`http://localhost:5000/items/${id}`);setTitle(itemResponse.data.title);setDescription(itemResponse.data.description);setSelectedCategory(itemResponse.data.categoryId);const categoriesResponse=await axios.get('http://localhost:5000/items/categories');setCategories(categoriesResponse.data);}catch(error){console.error('Error fetching item or categories',error);}};fetchItemAndCategories();},[id,navigate]);const handleEditItem=async e=>{e.preventDefault();const userId=localStorage.getItem('userId');if(!userId){console.error('User is not authenticated');return;}try{await axios.put(`http://localhost:5000/items/${id}`,{title,description,categoryId:selectedCategory},{headers:{'user-id':userId}});navigate('/');}catch(error){console.error('Error updating item',error);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"sm\",className:\"container\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Edit Item\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleEditItem,children:[/*#__PURE__*/_jsx(TextField,{label:\"Title\",variant:\"outlined\",fullWidth:true,value:title,onChange:e=>setTitle(e.target.value),margin:\"normal\",required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Description\",variant:\"outlined\",fullWidth:true,value:description,onChange:e=>setDescription(e.target.value),margin:\"normal\",multiline:true,rows:4,required:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,margin:\"normal\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsx(Select,{value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),required:true,children:categories.map(category=>/*#__PURE__*/_jsx(MenuItem,{value:category.id,children:category.name},category.id))})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Update Item\"})]})]});};export default EditItemPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","Container","TextField","Button","Typography","Box","Select","MenuItem","InputLabel","FormControl","jsx","_jsx","jsxs","_jsxs","EditItemPage","id","title","setTitle","description","setDescription","categories","setCategories","selectedCategory","setSelectedCategory","navigate","userId","localStorage","getItem","fetchItemAndCategories","itemResponse","get","data","categoryId","categoriesResponse","error","console","handleEditItem","e","preventDefault","put","headers","maxWidth","className","children","variant","gutterBottom","component","onSubmit","label","fullWidth","value","onChange","target","margin","required","multiline","rows","map","category","name","type","color"],"sources":["C:/Users/user/Desktop/imea/imeah-app/src/items/EditItemPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { Container, TextField, Button, Typography, Box, Select, MenuItem, InputLabel, FormControl } from '@mui/material';\r\n\r\nconst EditItemPage = () => {\r\n  const { id } = useParams();\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [categories, setCategories] = useState([]);\r\n  const [selectedCategory, setSelectedCategory] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const userId = localStorage.getItem('userId');\r\n    if (!userId) {\r\n      navigate('/login');  \r\n    }\r\n\r\n    const fetchItemAndCategories = async () => {\r\n      try {\r\n        const itemResponse = await axios.get(`http://localhost:5000/items/${id}`);\r\n        setTitle(itemResponse.data.title);\r\n        setDescription(itemResponse.data.description);\r\n        setSelectedCategory(itemResponse.data.categoryId);\r\n\r\n        const categoriesResponse = await axios.get('http://localhost:5000/items/categories');\r\n        setCategories(categoriesResponse.data);\r\n      } catch (error) {\r\n        console.error('Error fetching item or categories', error);\r\n      }\r\n    };\r\n\r\n    fetchItemAndCategories();\r\n  }, [id, navigate]);\r\n\r\n  const handleEditItem = async (e) => {\r\n    e.preventDefault();\r\n    const userId = localStorage.getItem('userId');\r\n\r\n    if (!userId) {\r\n      console.error('User is not authenticated');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await axios.put(`http://localhost:5000/items/${id}`, {\r\n        title,\r\n        description,\r\n        categoryId: selectedCategory, \r\n      }, {\r\n        headers: { 'user-id': userId },\r\n      });\r\n      navigate('/');\r\n    } catch (error) {\r\n      console.error('Error updating item', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\"className='container'>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        Edit Item\r\n      </Typography>\r\n      <Box component=\"form\" onSubmit={handleEditItem}>\r\n        <TextField\r\n          label=\"Title\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <TextField\r\n          label=\"Description\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          margin=\"normal\"\r\n          multiline\r\n          rows={4}\r\n          required\r\n        />\r\n        <FormControl fullWidth margin=\"normal\">\r\n          <InputLabel>Category</InputLabel>\r\n          <Select\r\n            value={selectedCategory}\r\n            onChange={(e) => setSelectedCategory(e.target.value)}\r\n            required\r\n          >\r\n            {categories.map((category) => (\r\n              <MenuItem key={category.id} value={category.id}>\r\n                {category.name}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n          Update Item\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EditItemPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}